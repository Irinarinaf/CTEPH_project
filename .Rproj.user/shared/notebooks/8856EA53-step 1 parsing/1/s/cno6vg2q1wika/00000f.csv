"0","data <- readRDS(""./data/processed_data_19dec24.rds"")"
"0",""
"0","xxBPA <- data%>%"
"0","  dplyr::select(USUBJID, visit, VisitDate, DateTPE, BPAdate, OS1_startdt)%>%"
"0","  filter(BPAdate >= OS1_startdt)%>%"
"0","  #group_by(USUBJID)%>%"
"0","  #summarise(minBPA = min(BPAdate))%>%"
"0","  mutate(type = ""BPA"")"
"0",""
"0","xxTPE <- data%>%"
"0","  dplyr::select(USUBJID, visit, VisitDate, DateTPE, BPAdate, OS1_startdt)%>%"
"0","  filter(DateTPE >= OS1_startdt)%>%"
"0","  #group_by(USUBJID)%>%"
"0","  #summarise(minBPA = min(BPAdate))%>%"
"0","  mutate(type = ""TPE"")"
"0",""
"0","BPAnames <- unique(xxBPA$USUBJID)"
"0","TPEnames <- unique(xxTPE$USUBJID)"
"0",""
"0","BPE_TPE_names <- c(TPEnames, BPAnames)[duplicated(c(TPEnames, BPAnames))]"
"0",""
"0","TPEnames <-setdiff(TPEnames, BPE_TPE_names)"
"0","BPAnames <-setdiff(BPAnames, BPE_TPE_names)"
"0",""
"0",""
"0","operation_class <- function(id, BPE_TPE_names, TPEnames, BPAnames){"
"0","  if(id %in% BPE_TPE_names){"
"0","    return(""both"")"
"0","  }"
"0","  else if(id %in% TPEnames){"
"0","    return(""TPE"")"
"0","  }"
"0","  else if(id %in% BPAnames){"
"0","    return(""BPE"")"
"0","  }"
"0","  else{"
"0","    return(""none"")"
"0","  }"
"0","}"
