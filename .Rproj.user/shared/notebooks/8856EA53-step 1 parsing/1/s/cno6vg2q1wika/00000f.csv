"0","# Reading and preprocessing data"
"0","data <- readRDS(""./data/processed_data_19dec24.rds"")"
"0",""
"0","# Function for filling in mutation on all visits"
"0","fixed_values <- function(ids) {"
"0","  x <- as.tibble(matrix(,,1))"
"0","  colnames(x) <- c(""Priormut"")"
"0","  x0 <- x"
"0","  for (id in ids){"
"0","    if(id %in% data$USUBJID[data$visit == ""1""]){"
"0","      x <-bind_rows(x, data%>% filter(visit == ""1"", USUBJID == id)%>%select(Priormut))"
"0","    }"
"0","    else{"
"0","      x <-bind_rows(x, x0)"
"0","    }"
"0","  }"
"0","  return(x%>%slice(-1))"
"0","}"
"0",""
"0","# calculation of the last visit before the start of treatment"
"0","last_visit_before_decline <- data%>%"
"0","  filter(VisitDate <= OS1_startdt)%>%"
"0","  group_by(USUBJID)%>%"
"0","  summarise(max_vis = max(visit))%>%"
"0","  ungroup()%>%"
"0","  mutate(name_vis = paste(USUBJID, max_vis, sep = ""_""))"
"0",""
"0","names <- last_visit_before_decline$name_vis"
